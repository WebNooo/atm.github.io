(this["webpackJsonprockstone-test"]=this["webpackJsonprockstone-test"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(6),l=n.n(s),r=n(3),i=n(2),o=n(0),u=function(e){var t,c=e.name,a=e.color,s=void 0===a?"black":a,l=e.style,r=null===(t=n(14))||void 0===t?void 0:t[c];return Object(o.jsx)(r,{style:Object(i.a)({fill:s},l)})},b=function(e){var t=e.children,n=e.width,c=e.height,a=e.disabled,s=void 0!==a&&a,l=e.margin,r=e.style,u=e.onClick;return Object(o.jsx)("button",{className:"button",style:Object(i.a)({width:n,height:c,margin:l},r),disabled:s,onClick:u,children:t})},j=function(e){var t=e.style,n=e.styleLabel,c=e.value,a=e.type,s=void 0===a?"text":a,l=e.label,r=e.readonly,i=void 0!==r&&r,u=e.onChange,b=e.onKeyUp;return Object(o.jsxs)("label",{className:"label",style:n,children:[l,Object(o.jsx)("input",{className:"input",type:s,value:c,onChange:u,onKeyDown:b,autoFocus:!0,readOnly:i,style:t})]})},d=(n(12),function(e,t){var n,c="0"===t[0]||","===t[0]?"":t;return e.toString().match(/\d/g)||","===e&&((null===c||void 0===c||null===(n=c.match(/,/g))||void 0===n?void 0:n.length)||0)<1?"".concat(c).concat(e):"Backspace"===e||"<"===e?c.slice(0,c.length-1):c}),O=function(e){return Object.keys(e).map(Number).reduce((function(t,n){return t+e[n]*n}),0)},h={banknotes:{},amountBanknotes:0,calculateBanknotes:{},message:{},screen:"main",value:"0"},v="SET_BANKNOTES",m="UPDATE_BANKNOTES",f="SET_CALCULATE_BANKNOTES",x="SET_MESSAGE",p="SET_SCREEN",k="SET_VALUE",y=a.a.createContext({state:h,dispatch:function(){return null}}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(i.a)(Object(i.a)({},e),{},{banknotes:t.banknotes,amountBanknotes:O(t.banknotes)});case m:var n=Object.keys(e.banknotes).map(Number).reduce((function(n,c){return n[c]=t.banknotes[c]?e.banknotes[c]-t.banknotes[c]:e.banknotes[c],n}),{});return Object(i.a)(Object(i.a)({},e),{},{banknotes:Object(i.a)({},n),amountBanknotes:e.amountBanknotes-O(t.banknotes)});case f:return Object(i.a)(Object(i.a)({},e),{},{calculateBanknotes:t.result});case x:return Object(i.a)(Object(i.a)({},e),{},{message:t.message});case p:return Object(i.a)(Object(i.a)({},e),{},{screen:t.screen});case k:return Object(i.a)(Object(i.a)({},e),{},{value:t.value});default:return e}},w=function(e){return{type:v,banknotes:e}},C=function(e){return{type:m,banknotes:e}},N=function(e){return{type:f,result:e}},E=function(e){return{type:p,screen:e}},B=function(e){var t=e.text,n=e.timeout;return{type:x,message:{text:t,timeout:n}}},S=function(e){return{type:k,value:e}},_=[{5e3:100,2e3:400,1e3:1e3,500:3e3,200:5e3,100:8e3,50:1e4},{5e3:476,2e3:345,1e3:6741,500:4362,200:234,100:1643,50:3450},{5e3:234,2e3:678,1e3:845,500:2451,200:9654,100:2345,50:234},{5e3:546,2e3:562,1e3:2543,500:4365,200:2154,100:124,50:342},{5e3:2732,2e3:347,1e3:479,500:7556,200:3296,100:1257,50:3854},{5e3:73,2e3:147,1e3:279,500:356,200:696,100:857,50:854}],T={margin:5,width:70,height:30},L=[7,8,9,4,5,6,1,2,3,",",0,"<"],A={width:80,height:60,margin:15},M=function(e){var t=e.children,n=e.onClick;return Object(o.jsx)(b,{onClick:n,width:180,height:40,margin:20,style:{justifyContent:"flex-start",paddingLeft:20},children:t})},P=n(4),I=function(){var e=Object(c.useContext)(y),t=e.state,n=e.dispatch;return{setMessage:Object(c.useCallback)((function(e){var c;(null===(c=t.message)||void 0===c?void 0:c.timeout)&&clearTimeout(t.message.timeout),n(B({text:e,timeout:setTimeout((function(){return n(B({}))}),3e3)}))}),[t.message])}},R=function(){var e=Object(c.useContext)(y),t=e.state,n=e.dispatch,a=I().setMessage;return{calculate:Object(c.useCallback)((function(){var e=parseFloat(t.value.replace(",","."));if(e>t.amountBanknotes)a("\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043b\u0438\u043c\u0438\u0442 \u043d\u0430 \u0432\u044b\u0432\u043e\u0434");else{var c=Object.keys(t.banknotes).map(Number).sort((function(e,t){return t-e})),s=c[c.length-1];if(e<s)a("\u0421\u0443\u043c\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u043e\u0432\u043d\u044f\u0442\u044c\u0441\u044f ".concat(s));else{var l=c.reduce((function(e,n){var c,a=(null===(c=t.banknotes)||void 0===c?void 0:c[n])||0,s=Math.floor(e.amount/n),l=a>s?s:a;return e.amount=e.amount-n*l,l>0&&(e.banknotes=Object(i.a)(Object(i.a)({},e.banknotes),{},Object(P.a)({},n,l))),e}),{banknotes:{},amount:e});"main"===t.screen&&(n(C(l.banknotes)),n(N({banknotes:l.banknotes,amount:e,remainder:l.amount})))}}}),[t.value,t.amountBanknotes,t.banknotes,t.screen,a,n])}},z=function(){var e=Object(c.useContext)(y).dispatch,t=R().calculate,n=Object(c.useCallback)((function(){t()}),[t]),a=Object(c.useCallback)((function(){e(S("0")),e(N({}))}),[e]);return Object(o.jsxs)("div",{className:"controls",children:[Object(o.jsx)(F,{}),Object(o.jsxs)("div",{className:"controls-action",children:[Object(o.jsxs)(M,{onClick:n,children:[Object(o.jsx)(u,{name:"Ok",color:"darkgreen",style:{marginRight:10}}),"\u0412\u044b\u0432\u043e\u0434"]}),Object(o.jsxs)(M,{onClick:a,children:[Object(o.jsx)(u,{name:"Close",color:"darkred",style:{marginRight:10}}),"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"]})]})]})},K=function(){var e,t,n,a=Object(c.useContext)(y).state;return console.log(a.calculateBanknotes),Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[a.calculateBanknotes.banknotes&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"cash_table",children:[Object(o.jsxs)("div",{className:"cash_row head",children:[Object(o.jsx)("span",{children:"\u0411\u0430\u043d\u043a\u043d\u043e\u0442\u0430"}),Object(o.jsx)("span",{children:"\u0412\u044b\u0432\u043e\u0434"}),Object(o.jsx)("span",{children:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a"})]}),Object.entries((null===a||void 0===a||null===(e=a.calculateBanknotes)||void 0===e?void 0:e.banknotes)||{}).map((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"cash_row",children:[Object(o.jsx)("span",{style:{width:50},children:n}),Object(o.jsx)("span",{style:{width:50,textAlign:"center"},children:c}),Object(o.jsx)("span",{style:{width:50,textAlign:"right"},children:a.banknotes[+n]})]},n)}))]}),Object(o.jsxs)("div",{style:{justifyContent:"space-between",fontSize:14,marginTop:10,display:"flex"},children:[Object(o.jsxs)("span",{children:["\u0421\u0443\u043c\u043c\u0430: ",(null===a||void 0===a||null===(t=a.calculateBanknotes)||void 0===t?void 0:t.amount)||0]}),Object(o.jsxs)("span",{children:["\u041d\u0435 \u0432\u044b\u043f\u043b\u0430\u0447\u0435\u043d\u043e: ",(null===a||void 0===a||null===(n=a.calculateBanknotes)||void 0===n?void 0:n.remainder)||0]})]})]}),Object(o.jsx)(j,{styleLabel:{marginTop:20},label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043d\u044f\u0442\u044c:",value:a.value,readonly:!0})]})},U=function(){var e=Object(c.useContext)(y).state;return Object(o.jsxs)("div",{className:"cash_table",children:[Object(o.jsxs)("div",{className:"cash_row head",children:[Object(o.jsx)("span",{children:"\u041d\u043e\u043c\u0438\u043d\u0430\u043b \u043a\u0443\u043f\u044e\u0440"})," ",Object(o.jsx)("span",{children:"\u041a\u043e\u043b-\u0432\u043e"})]}),Object.entries(e.banknotes).map((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"cash_row",children:[Object(o.jsx)("span",{children:n})," ",Object(o.jsx)("span",{children:c})]},n)}))]})},D=function(){var e,t=Object(c.useContext)(y),n=t.state,a=t.dispatch,s=I().setMessage,l={main:{title:"\u0421\u043d\u044f\u0442\u0438\u0435 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445",component:Object(o.jsx)(K,{})},help:{title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u0443\u043f\u044e\u0440\u0430\u0445",component:Object(o.jsx)(U,{})}},r=Object(c.useCallback)((function(e){return function(){a(w(_[e])),s("\u041d\u0430\u0431\u043e\u0440 \u043a\u0443\u043f\u044e\u0440 \u0438\u0437\u043c\u0435\u043d\u0435\u043d")}}),[a,s]),u=Object(c.useCallback)((function(e){return function(){a(E(e))}}),[a]);return Object(o.jsxs)("div",{className:"screen",children:[Object(o.jsxs)("div",{className:"screen-controls left",children:[Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:r(0)})),Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:r(1)})),Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:r(2)})),Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:u("main")}))]}),Object(o.jsxs)("div",{className:"screen-display",children:[Object(o.jsxs)("div",{className:"screen-display_side left",children:[Object(o.jsx)("div",{className:"button-label",children:"\u041d\u0430\u0431\u043e\u0440 1"}),Object(o.jsx)("div",{className:"button-label",children:"\u041d\u0430\u0431\u043e\u0440 2"}),Object(o.jsx)("div",{className:"button-label",children:"\u041d\u0430\u0431\u043e\u0440 3"}),Object(o.jsx)("div",{className:"button-label",children:"\u0412\u0432\u043e\u0434"})]}),Object(o.jsxs)("div",{className:"screen-display_content",children:[Object(o.jsx)("div",{className:"header",children:l[n.screen].title}),Object(o.jsx)("div",{className:"body",children:l[n.screen].component}),Object(o.jsx)("div",{className:"footer",children:null===(e=n.message)||void 0===e?void 0:e.text})]}),Object(o.jsxs)("div",{className:"screen-display_side right",children:[Object(o.jsx)("div",{className:"button-label",children:"\u041d\u0430\u0431\u043e\u0440 4"}),Object(o.jsx)("div",{className:"button-label",children:"\u041d\u0430\u0431\u043e\u0440 5"}),Object(o.jsx)("div",{className:"button-label",children:"\u041d\u0430\u0431\u043e\u0440 6"}),Object(o.jsx)("div",{className:"button-label",children:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"})]})]}),Object(o.jsxs)("div",{className:"screen-controls right",children:[Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:r(3)})),Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:r(4)})),Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:r(5)})),Object(o.jsx)(b,Object(i.a)(Object(i.a)({},A),{},{onClick:u("help")}))]})]})},F=function(){var e=Object(c.useContext)(y),t=e.state,n=e.dispatch,a=Object(c.useCallback)((function(e){return function(){n(S(d(e,t.value)))}}),[n,t.value]);return Object(o.jsx)("div",{className:"controls-numpad",children:L.map((function(e){return Object(o.jsx)(b,Object(i.a)(Object(i.a)({onClick:a(e)},T),{},{children:e}),e)}))})},V=function(){var e=Object(c.useContext)(y),t=e.state,n=e.dispatch,a=R().calculate,s=Object(c.useCallback)((function(e){"Enter"===e.key?console.log(a()):n(S(d(e.key,t.value)))}),[a,n,t.value]);return Object(c.useEffect)((function(){console.log("mount"),n(w(_[0]))}),[n]),Object(c.useEffect)((function(){return window.addEventListener("keydown",s),function(){window.removeEventListener("keydown",s)}}),[s]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(D,{}),Object(o.jsx)(z,{})]})},H=function(){var e=Object(c.useReducer)(g,h),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(o.jsx)(y.Provider,{value:{dispatch:a,state:n},children:Object(o.jsx)(V,{})})};l.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(H,{})}),document.getElementById("root"))},14:function(e,t,n){"use strict";n.r(t),n.d(t,"Ok",(function(){return j})),n.d(t,"Close",(function(){return m}));var c,a,s=n(1),l=["title","titleId"];function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},r.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function o(e,t){var n=e.title,o=e.titleId,u=i(e,l);return s.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":o},u),n?s.createElement("title",{id:o},n):null,c||(c=s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),a||(a=s.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})))}var u,b,j=s.forwardRef(o),d=(n.p,["title","titleId"]);function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},O.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function v(e,t){var n=e.title,c=e.titleId,a=h(e,d);return s.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":c},a),n?s.createElement("title",{id:c},n):null,u||(u=s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),b||(b=s.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})))}var m=s.forwardRef(v);n.p}},[[13,1,2]]]);
//# sourceMappingURL=main.f1d099d6.chunk.js.map